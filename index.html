
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GOVNOCHAIN</title>
  <link rel="stylesheet" href="style.css?v=1.0.6" />
  <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
</head>
<body>
  <div class="wrapper">
    <header>
      <h1>üí© GOVNOCHAIN</h1>
      <p>Web3-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è GOVNO —á–µ—Ä–µ–∑ –±–ª–æ–∫—á–µ–π–Ω</p>
    </header>

    <div id="connect-button"></div>

    <section class="cards">
      <div class="card bronze">
        <h2>ü•â Bronze –£—Ä–æ–≤–µ–Ω—å</h2>
        <p>–í—Ö–æ–¥: –æ—Ç 10 GOVNO</p>
        <p>–î–æ—Ö–æ–¥: 5%</p>
        <button>üí© –í–ª–æ–∂–∏—Ç—å</button>
      </div>
      <div class="card silver">
        <h2>ü•à Silver –£—Ä–æ–≤–µ–Ω—å</h2>
        <p>–í—Ö–æ–¥: –æ—Ç 50 GOVNO</p>
        <p>–î–æ—Ö–æ–¥: 10%</p>
        <button>üí© –í–ª–æ–∂–∏—Ç—å</button>
      </div>
      <div class="card gold">
        <h2>ü•á Golden –£—Ä–æ–≤–µ–Ω—å</h2>
        <p>–í—Ö–æ–¥: –æ—Ç 100 GOVNO</p>
        <p>–î–æ—Ö–æ–¥: 15%</p>
        <button>üí© –í–ª–æ–∂–∏—Ç—å</button>
      </div>
    </section>

    <section class="ref-section">
      <input type="text" placeholder="üë• –í–≤–µ–¥–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" id="refInput"/>
      <button>üßª –ó–∞–±—Ä–∞—Ç—å GOVNO</button>
      <p>üì¶ –ë–∞–ª–∞–Ω—Å: <strong id="wallet-balance">0 GOVNO</strong></p>
      <button onclick="logout()" class="logout">üîì –í—ã–π—Ç–∏</button>

      <div class="ref-generate">
        <p>üîó –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</p>
        <input type="text" id="myRef" readonly />
        <button onclick="copyRef()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
    </section>
  </div>

  <script>
    const connector = new TON_CONNECT_UI.TonConnectUI({
      manifestUrl: 'https://mmyrtzopal.github.io/govnochain/tonconnect-manifest.json',
      buttonRootId: 'connect-button',
    });

    // —Å–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∞–¥—Ä–µ—Å
    connector.onStatusChange(wallet => {
      if (wallet && wallet.account && wallet.account.address) {
        const myAddress = wallet.account.address;
        const myRef = document.getElementById("myRef");
        myRef.value = window.location.origin + window.location.pathname + "?ref=" + myAddress;
      }
    });

    // –∞–≤—Ç–æ-–≤—Å—Ç–∞–≤–∫–∞ —Ä–µ—Ñ–∫–∏ –∏–∑ URL
    const params = new URLSearchParams(window.location.search);
    const ref = params.get("ref");
    if (ref) document.getElementById("refInput").value = ref;

    function logout() {
      connector.disconnect();
      alert("–í—ã –≤—ã—à–ª–∏ –∏–∑ GOVNOCHAIN!");
      location.reload();
    }

    function copyRef() {
      const myRef = document.getElementById("myRef");
      myRef.select();
      myRef.setSelectionRange(0, 99999);
      document.execCommand("copy");
      alert("–†–µ—Ñ-—Å—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!");
    }
  </script>
</body>
</html>
